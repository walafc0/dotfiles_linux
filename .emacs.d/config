(defun toggle-comment-on-line ()
  "comment or uncomment current line"
  (interactive)
  (comment-or-uncomment-region (line-beginning-position) (line-end-position)))

(global-set-key (kbd "C-x :") 'toggle-comment-on-line)
(global-set-key (kbd "C-x /") 'comment-or-uncomment-region)


(setq backup-by-copying t backup-directory-alist '(("." . "~/.emacs.d/backup"))
   delete-old-versions t kept-new-versions 6 kept-old-versions 2
   version-control t)

(defun load-directory (directory)
  "Load recursively all `.el' files in DIRECTORY."
  (dolist (element (directory-files-and-attributes directory nil nil nil))
    (let* ((path (car element))
           (fullpath (concat directory "/" path))
           (isdir (car (cdr element)))
           (ignore-dir (or (string= path ".") (string= path ".."))))
      (cond
       ((and (eq isdir t) (not ignore-dir))
        (load-directory fullpath))
       ((and (eq isdir nil) (string= (substring path -3) ".el"))
        (load (file-name-sans-extension fullpath)))))))

(load-directory "~/.emacs.d")

(autoload 'promela-mode "promela-mode" "PROMELA mode" nil t)
(setq auto-mode-alist
      (append
      (list (cons "\\.promela$"  'promela-mode)
      	    (cons "\\.spin$"     'promela-mode)
	    (cons "\\.pml$"      'promela-mode)
	    )
      auto-mode-alist))

